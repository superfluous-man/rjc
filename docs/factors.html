<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>15 Factors | R for Data Science (2e)</title>
<meta name="author" content="Hadley Wickham and Garrett Grolemund">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.4/tabs.js"></script><script src="libs/bs3compat-0.2.4/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet">
<script src="libs/str_view-binding-1.4.0/str_view.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R for Data Science (2e)</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Explore</li>
<li><a class="" href="explore-intro.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="data-visualisation.html"><span class="header-section-number">3</span> Data visualisation</a></li>
<li><a class="" href="workflow-basics.html"><span class="header-section-number">4</span> Workflow: basics</a></li>
<li><a class="" href="transform.html"><span class="header-section-number">5</span> Data transformation</a></li>
<li><a class="" href="workflow-scripts.html"><span class="header-section-number">6</span> Workflow: scripts</a></li>
<li><a class="" href="exploratory-data-analysis.html"><span class="header-section-number">7</span> Exploratory Data Analysis</a></li>
<li><a class="" href="workflow-projects.html"><span class="header-section-number">8</span> Workflow: projects</a></li>
<li class="book-part">Wrangle</li>
<li><a class="" href="wrangle-intro.html"><span class="header-section-number">9</span> Introduction</a></li>
<li><a class="" href="tibbles.html"><span class="header-section-number">10</span> Tibbles</a></li>
<li><a class="" href="data-import.html"><span class="header-section-number">11</span> Data import</a></li>
<li><a class="" href="tidy-data.html"><span class="header-section-number">12</span> Tidy data</a></li>
<li><a class="" href="relational-data.html"><span class="header-section-number">13</span> Relational data</a></li>
<li><a class="" href="strings.html"><span class="header-section-number">14</span> Strings</a></li>
<li><a class="active" href="factors.html"><span class="header-section-number">15</span> Factors</a></li>
<li><a class="" href="dates-and-times.html"><span class="header-section-number">16</span> Dates and times</a></li>
<li class="book-part">Program</li>
<li><a class="" href="program-intro.html"><span class="header-section-number">17</span> Introduction</a></li>
<li><a class="" href="pipes.html"><span class="header-section-number">18</span> Pipes</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">19</span> Functions</a></li>
<li><a class="" href="vectors.html"><span class="header-section-number">20</span> Vectors</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">21</span> Iteration</a></li>
<li class="book-part">Model</li>
<li><a class="" href="model-intro.html"><span class="header-section-number">22</span> Introduction</a></li>
<li><a class="" href="model-basics.html"><span class="header-section-number">23</span> Model basics</a></li>
<li><a class="" href="model-building.html"><span class="header-section-number">24</span> Model building</a></li>
<li><a class="" href="many-models.html"><span class="header-section-number">25</span> Many models</a></li>
<li class="book-part">Communicate</li>
<li><a class="" href="communicate-intro.html"><span class="header-section-number">26</span> Introduction</a></li>
<li><a class="" href="r-markdown.html"><span class="header-section-number">27</span> R Markdown</a></li>
<li><a class="" href="graphics-for-communication.html"><span class="header-section-number">28</span> Graphics for communication</a></li>
<li><a class="" href="r-markdown-formats.html"><span class="header-section-number">29</span> R Markdown formats</a></li>
<li><a class="" href="r-markdown-workflow.html"><span class="header-section-number">30</span> R Markdown workflow</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r4ds">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="factors" class="section level1" number="15">
<h1>
<span class="header-section-number">15</span> Factors<a class="anchor" aria-label="anchor" href="#factors"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction-9" class="section level2" number="15.1">
<h2>
<span class="header-section-number">15.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-9"><i class="fas fa-link"></i></a>
</h2>
<p>In R, factors are used to work with categorical variables, variables that have a fixed and known set of possible values. They are also useful when you want to display character vectors in a non-alphabetical order.</p>
<p>Historically, factors were much easier to work with than characters. As a result, many of the functions in base R automatically convert characters to factors. This means that factors often crop up in places where they’re not actually helpful. Fortunately, you don’t need to worry about that in the tidyverse, and can focus on situations where factors are genuinely useful.</p>
<div id="prerequisites-9" class="section level3" number="15.1.1">
<h3>
<span class="header-section-number">15.1.1</span> Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites-9"><i class="fas fa-link"></i></a>
</h3>
<p>To work with factors, we’ll use the <strong>forcats</strong> package, which is part of the core tidyverse. It provides tools for dealing with <strong>cat</strong>egorical variables (and it’s an anagram of factors!) using a wide range of helpers for working with factors.</p>
<div class="sourceCode" id="cb362"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="learning-more-1" class="section level3" number="15.1.2">
<h3>
<span class="header-section-number">15.1.2</span> Learning more<a class="anchor" aria-label="anchor" href="#learning-more-1"><i class="fas fa-link"></i></a>
</h3>
<p>If you want to learn more about factors, I recommend reading Amelia McNamara and Nicholas Horton’s paper, <a href="https://peerj.com/preprints/3163/"><em>Wrangling categorical data in R</em></a>. This paper lays out some of the history discussed in <a href="http://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/"><em>stringsAsFactors: An unauthorized biography</em></a> and <a href="http://notstatschat.tumblr.com/post/124987394001/stringsasfactors-sigh"><em>stringsAsFactors = &lt;sigh&gt;</em></a>, and compares the tidy approaches to categorical data outlined in this book with base R methods. An early version of the paper help motivate and scope the forcats package; thanks Amelia &amp; Nick!</p>
</div>
</div>
<div id="creating-factors" class="section level2" number="15.2">
<h2>
<span class="header-section-number">15.2</span> Creating factors<a class="anchor" aria-label="anchor" href="#creating-factors"><i class="fas fa-link"></i></a>
</h2>
<p>Imagine that you have a variable that records month:</p>
<div class="sourceCode" id="cb363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Dec"</span>, <span class="st">"Apr"</span>, <span class="st">"Jan"</span>, <span class="st">"Mar"</span><span class="op">)</span></code></pre></div>
<p>Using a string to record this variable has two problems:</p>
<ol style="list-style-type: decimal">
<li>
<p>There are only twelve possible months, and there’s nothing saving you
from typos:</p>
<div class="sourceCode" id="cb364"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Dec"</span>, <span class="st">"Apr"</span>, <span class="st">"Jam"</span>, <span class="st">"Mar"</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p>It doesn’t sort in a useful way:</p>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span>
<span class="co">#&gt; [1] "Apr" "Dec" "Jan" "Mar"</span></code></pre></div>
</li>
</ol>
<p>You can fix both of these problems with a factor. To create a factor you must start by creating a list of the valid <strong>levels</strong>:</p>
<div class="sourceCode" id="cb366"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">month_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"Jan"</span>, <span class="st">"Feb"</span>, <span class="st">"Mar"</span>, <span class="st">"Apr"</span>, <span class="st">"May"</span>, <span class="st">"Jun"</span>, 
  <span class="st">"Jul"</span>, <span class="st">"Aug"</span>, <span class="st">"Sep"</span>, <span class="st">"Oct"</span>, <span class="st">"Nov"</span>, <span class="st">"Dec"</span>
<span class="op">)</span></code></pre></div>
<p>Now you can create a factor:</p>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x1</span>, levels <span class="op">=</span> <span class="va">month_levels</span><span class="op">)</span>
<span class="va">y1</span>
<span class="co">#&gt; [1] Dec Apr Jan Mar</span>
<span class="co">#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span>
<span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">y1</span><span class="op">)</span>
<span class="co">#&gt; [1] Jan Mar Apr Dec</span>
<span class="co">#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></code></pre></div>
<p>And any values not in the set will be silently converted to NA:</p>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x2</span>, levels <span class="op">=</span> <span class="va">month_levels</span><span class="op">)</span>
<span class="va">y2</span>
<span class="co">#&gt; [1] Dec  Apr  &lt;NA&gt; Mar </span>
<span class="co">#&gt; Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></code></pre></div>
<p>If you want a warning, you can use <code><a href="https://readr.tidyverse.org/reference/parse_factor.html">readr::parse_factor()</a></code>:</p>
<div class="sourceCode" id="cb369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu">parse_factor</span><span class="op">(</span><span class="va">x2</span>, levels <span class="op">=</span> <span class="va">month_levels</span><span class="op">)</span>
<span class="co">#&gt; Warning: 1 parsing failure.</span>
<span class="co">#&gt; row col           expected actual</span>
<span class="co">#&gt;   3  -- value in level set    Jam</span></code></pre></div>
<p>If you omit the levels, they’ll be taken from the data in alphabetical order:</p>
<div class="sourceCode" id="cb370"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span>
<span class="co">#&gt; [1] Dec Apr Jan Mar</span>
<span class="co">#&gt; Levels: Apr Dec Jan Mar</span></code></pre></div>
<p>Sometimes you’d prefer that the order of the levels match the order of the first appearance in the data. You can do that when creating the factor by setting levels to <code><a href="https://rdrr.io/r/base/unique.html">unique(x)</a></code>, or after the fact, with <code>fct_inorder()</code>:</p>
<div class="sourceCode" id="cb371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x1</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span>
<span class="va">f1</span>
<span class="co">#&gt; [1] Dec Apr Jan Mar</span>
<span class="co">#&gt; Levels: Dec Apr Jan Mar</span>

<span class="va">f2</span> <span class="op">&lt;-</span> <span class="va">x1</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">fct_inorder</span><span class="op">(</span><span class="op">)</span>
<span class="va">f2</span>
<span class="co">#&gt; [1] Dec Apr Jan Mar</span>
<span class="co">#&gt; Levels: Dec Apr Jan Mar</span></code></pre></div>
<p>If you ever need to access the set of valid levels directly, you can do so with <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code>:</p>
<div class="sourceCode" id="cb372"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span>
<span class="co">#&gt; [1] "Dec" "Apr" "Jan" "Mar"</span></code></pre></div>
</div>
<div id="general-social-survey" class="section level2" number="15.3">
<h2>
<span class="header-section-number">15.3</span> General Social Survey<a class="anchor" aria-label="anchor" href="#general-social-survey"><i class="fas fa-link"></i></a>
</h2>
<p>For the rest of this chapter, we’re going to focus on <code><a href="https://forcats.tidyverse.org/reference/gss_cat.html">forcats::gss_cat</a></code>. It’s a sample of data from the <a href="http://gss.norc.org">General Social Survey</a>, which is a long-running US survey conducted by the independent research organization NORC at the University of Chicago. The survey has thousands of questions, so in <code>gss_cat</code> I’ve selected a handful that will illustrate some common challenges you’ll encounter when working with factors.</p>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span>
<span class="co">#&gt; # A tibble: 21,483 x 9</span>
<span class="co">#&gt;    year marital      age race  rincome    partyid     relig     denom    tvhours</span>
<span class="co">#&gt;   &lt;int&gt; &lt;fct&gt;      &lt;int&gt; &lt;fct&gt; &lt;fct&gt;      &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1  2000 Never mar…    26 White $8000 to … Ind,near r… Protesta… Souther…      12</span>
<span class="co">#&gt; 2  2000 Divorced      48 White $8000 to … Not str re… Protesta… Baptist…      NA</span>
<span class="co">#&gt; 3  2000 Widowed       67 White Not appli… Independent Protesta… No deno…       2</span>
<span class="co">#&gt; 4  2000 Never mar…    39 White Not appli… Ind,near r… Orthodox… Not app…       4</span>
<span class="co">#&gt; 5  2000 Divorced      25 White Not appli… Not str de… None      Not app…       1</span>
<span class="co">#&gt; 6  2000 Married       25 White $20000 - … Strong dem… Protesta… Souther…      NA</span>
<span class="co">#&gt; # … with 21,477 more rows</span></code></pre></div>
<p>(Remember, since this dataset is provided by a package, you can get more information about the variables with <code>?gss_cat</code>.)</p>
<p>When factors are stored in a tibble, you can’t see their levels so easily. One way to see them is with <code>count()</code>:</p>
<div class="sourceCode" id="cb374"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">race</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 2</span>
<span class="co">#&gt;   race      n</span>
<span class="co">#&gt; * &lt;fct&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 Other  1959</span>
<span class="co">#&gt; 2 Black  3129</span>
<span class="co">#&gt; 3 White 16395</span></code></pre></div>
<p>Or with a bar chart:</p>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">gss_cat</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">race</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-13-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>By default, ggplot2 will drop levels that don’t have any values. You can force them to display with:</p>
<div class="sourceCode" id="cb376"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">gss_cat</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">race</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_discrete</span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-14-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>These levels represent valid values that simply did not occur in this dataset. In dplyr::count() set the <code>.drop</code> option to <code>FALSE</code>, to show these.</p>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">race</span>, 
        .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   race               n</span>
<span class="co">#&gt; * &lt;fct&gt;          &lt;int&gt;</span>
<span class="co">#&gt; 1 Other           1959</span>
<span class="co">#&gt; 2 Black           3129</span>
<span class="co">#&gt; 3 White          16395</span>
<span class="co">#&gt; 4 Not applicable     0</span></code></pre></div>
<p>When working with factors, the two most common operations are changing the order of the levels, and changing the values of the levels. Those operations are described in the sections below.</p>
<div id="exercise" class="section level3" number="15.3.1">
<h3>
<span class="header-section-number">15.3.1</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Explore the distribution of <code>rincome</code> (reported income). What makes the
default bar chart hard to understand? How could you improve the plot?</p></li>
<li><p>What is the most common <code>relig</code> in this survey? What’s the most
common <code>partyid</code>?</p></li>
<li><p>Which <code>relig</code> does <code>denom</code> (denomination) apply to? How can you find
out with a table? How can you find out with a visualisation?</p></li>
</ol>
</div>
</div>
<div id="modifying-factor-order" class="section level2" number="15.4">
<h2>
<span class="header-section-number">15.4</span> Modifying factor order<a class="anchor" aria-label="anchor" href="#modifying-factor-order"><i class="fas fa-link"></i></a>
</h2>
<p>It’s often useful to change the order of the factor levels in a visualisation. For example, imagine you want to explore the average number of hours spent watching TV per day across religions:</p>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">relig_summary</span> <span class="op">&lt;-</span> <span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">relig</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>
    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
    tvhours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">tvhours</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">relig_summary</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">tvhours</span>, <span class="va">relig</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-16-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>It is difficult to interpret this plot because there’s no overall pattern. We can improve it by reordering the levels of <code>relig</code> using <code>fct_reorder()</code>. <code>fct_reorder()</code> takes three arguments:</p>
<ul>
<li>
<code>f</code>, the factor whose levels you want to modify.</li>
<li>
<code>x</code>, a numeric vector that you want to use to reorder the levels.</li>
<li>Optionally, <code>fun</code>, a function that’s used if there are multiple values of
<code>x</code> for each value of <code>f</code>. The default value is <code>median</code>.</li>
</ul>
<div class="sourceCode" id="cb379"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">relig_summary</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">tvhours</span>, <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">relig</span>, <span class="va">tvhours</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-17-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Reordering religion makes it much easier to see that people in the “Don’t know” category watch much more TV, and Hinduism &amp; Other Eastern religions watch much less.</p>
<p>As you start making more complicated transformations, I’d recommend moving them out of <code>aes()</code> and into a separate <code>mutate()</code> step. For example, you could rewrite the plot above as:</p>
<div class="sourceCode" id="cb380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">relig_summary</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>relig <span class="op">=</span> <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">relig</span>, <span class="va">tvhours</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">tvhours</span>, <span class="va">relig</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>What if we create a similar plot looking at how average age varies across reported income level?</p>
<div class="sourceCode" id="cb381"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rincome_summary</span> <span class="op">&lt;-</span> <span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">rincome</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>
    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
    tvhours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">tvhours</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">rincome_summary</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">age</span>, <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">rincome</span>, <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-19-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Here, arbitrarily reordering the levels isn’t a good idea! That’s because <code>rincome</code> already has a principled order that we shouldn’t mess with. Reserve <code>fct_reorder()</code> for factors whose levels are arbitrarily ordered.</p>
<p>However, it does make sense to pull “Not applicable” to the front with the other special levels. You can use <code>fct_relevel()</code>. It takes a factor, <code>f</code>, and then any number of levels that you want to move to the front of the line.</p>
<div class="sourceCode" id="cb382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">rincome_summary</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">age</span>, <span class="fu">fct_relevel</span><span class="op">(</span><span class="va">rincome</span>, <span class="st">"Not applicable"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-20-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Why do you think the average age for “Not applicable” is so high?</p>
<p>Another type of reordering is useful when you are colouring the lines on a plot. <code>fct_reorder2()</code> reorders the factor by the <code>y</code> values associated with the largest <code>x</code> values. This makes the plot easier to read because the line colours line up with the legend.</p>
<div class="sourceCode" id="cb383"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">by_age</span> <span class="op">&lt;-</span> <span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">age</span>, <span class="va">marital</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">by_age</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">age</span>, <span class="va">prop</span>, colour <span class="op">=</span> <span class="va">marital</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">by_age</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">age</span>, <span class="va">prop</span>, colour <span class="op">=</span> <span class="fu">fct_reorder2</span><span class="op">(</span><span class="va">marital</span>, <span class="va">age</span>, <span class="va">prop</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"marital"</span><span class="op">)</span></code></pre></div>
<p><img src="factors_files/figure-html/unnamed-chunk-21-1.png" width="50%"><img src="factors_files/figure-html/unnamed-chunk-21-2.png" width="50%"></p>
<p>Finally, for bar plots, you can use <code>fct_infreq()</code> to order levels in increasing frequency: this is the simplest type of reordering because it doesn’t need any extra variables. You may want to combine with <code>fct_rev()</code>.</p>
<div class="sourceCode" id="cb384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>marital <span class="op">=</span> <span class="va">marital</span> <span class="op">%&gt;%</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">fct_rev</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">marital</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="factors_files/figure-html/unnamed-chunk-22-1.png" width="70%" style="display: block; margin: auto;"></div>
<div id="exercises-45" class="section level3" number="15.4.1">
<h3>
<span class="header-section-number">15.4.1</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-45"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>There are some suspiciously high numbers in <code>tvhours</code>. Is the mean a good
summary?</p></li>
<li><p>For each factor in <code>gss_cat</code> identify whether the order of the levels is
arbitrary or principled.</p></li>
<li><p>Why did moving “Not applicable” to the front of the levels move it to the
bottom of the plot?</p></li>
</ol>
</div>
</div>
<div id="modifying-factor-levels" class="section level2" number="15.5">
<h2>
<span class="header-section-number">15.5</span> Modifying factor levels<a class="anchor" aria-label="anchor" href="#modifying-factor-levels"><i class="fas fa-link"></i></a>
</h2>
<p>More powerful than changing the orders of the levels is changing their values. This allows you to clarify labels for publication, and collapse levels for high-level displays. The most general and powerful tool is <code>fct_recode()</code>. It allows you to recode, or change, the value of each level. For example, take the <code>gss_cat$partyid</code>:</p>
<div class="sourceCode" id="cb385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span> <span class="fu">count</span><span class="op">(</span><span class="va">partyid</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 2</span>
<span class="co">#&gt;   partyid                n</span>
<span class="co">#&gt; * &lt;fct&gt;              &lt;int&gt;</span>
<span class="co">#&gt; 1 No answer            154</span>
<span class="co">#&gt; 2 Don't know             1</span>
<span class="co">#&gt; 3 Other party          393</span>
<span class="co">#&gt; 4 Strong republican   2314</span>
<span class="co">#&gt; 5 Not str republican  3032</span>
<span class="co">#&gt; 6 Ind,near rep        1791</span>
<span class="co">#&gt; # … with 4 more rows</span></code></pre></div>
<p>The levels are terse and inconsistent. Let’s tweak them to be longer and use a parallel construction.</p>
<div class="sourceCode" id="cb386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>partyid <span class="op">=</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">partyid</span>,
    <span class="st">"Republican, strong"</span>    <span class="op">=</span> <span class="st">"Strong republican"</span>,
    <span class="st">"Republican, weak"</span>      <span class="op">=</span> <span class="st">"Not str republican"</span>,
    <span class="st">"Independent, near rep"</span> <span class="op">=</span> <span class="st">"Ind,near rep"</span>,
    <span class="st">"Independent, near dem"</span> <span class="op">=</span> <span class="st">"Ind,near dem"</span>,
    <span class="st">"Democrat, weak"</span>        <span class="op">=</span> <span class="st">"Not str democrat"</span>,
    <span class="st">"Democrat, strong"</span>      <span class="op">=</span> <span class="st">"Strong democrat"</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">partyid</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 2</span>
<span class="co">#&gt;   partyid                   n</span>
<span class="co">#&gt; * &lt;fct&gt;                 &lt;int&gt;</span>
<span class="co">#&gt; 1 No answer               154</span>
<span class="co">#&gt; 2 Don't know                1</span>
<span class="co">#&gt; 3 Other party             393</span>
<span class="co">#&gt; 4 Republican, strong     2314</span>
<span class="co">#&gt; 5 Republican, weak       3032</span>
<span class="co">#&gt; 6 Independent, near rep  1791</span>
<span class="co">#&gt; # … with 4 more rows</span></code></pre></div>
<p><code>fct_recode()</code> will leave levels that aren’t explicitly mentioned as is, and will warn you if you accidentally refer to a level that doesn’t exist.</p>
<p>To combine groups, you can assign multiple old levels to the same new level:</p>
<div class="sourceCode" id="cb387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>partyid <span class="op">=</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">partyid</span>,
    <span class="st">"Republican, strong"</span>    <span class="op">=</span> <span class="st">"Strong republican"</span>,
    <span class="st">"Republican, weak"</span>      <span class="op">=</span> <span class="st">"Not str republican"</span>,
    <span class="st">"Independent, near rep"</span> <span class="op">=</span> <span class="st">"Ind,near rep"</span>,
    <span class="st">"Independent, near dem"</span> <span class="op">=</span> <span class="st">"Ind,near dem"</span>,
    <span class="st">"Democrat, weak"</span>        <span class="op">=</span> <span class="st">"Not str democrat"</span>,
    <span class="st">"Democrat, strong"</span>      <span class="op">=</span> <span class="st">"Strong democrat"</span>,
    <span class="st">"Other"</span>                 <span class="op">=</span> <span class="st">"No answer"</span>,
    <span class="st">"Other"</span>                 <span class="op">=</span> <span class="st">"Don't know"</span>,
    <span class="st">"Other"</span>                 <span class="op">=</span> <span class="st">"Other party"</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">partyid</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 2</span>
<span class="co">#&gt;   partyid                   n</span>
<span class="co">#&gt; * &lt;fct&gt;                 &lt;int&gt;</span>
<span class="co">#&gt; 1 Other                   548</span>
<span class="co">#&gt; 2 Republican, strong     2314</span>
<span class="co">#&gt; 3 Republican, weak       3032</span>
<span class="co">#&gt; 4 Independent, near rep  1791</span>
<span class="co">#&gt; 5 Independent            4119</span>
<span class="co">#&gt; 6 Independent, near dem  2499</span>
<span class="co">#&gt; # … with 2 more rows</span></code></pre></div>
<p>You must use this technique with care: if you group together categories that are truly different you will end up with misleading results.</p>
<p>If you want to collapse a lot of levels, <code>fct_collapse()</code> is a useful variant of <code>fct_recode()</code>. For each new variable, you can provide a vector of old levels:</p>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>partyid <span class="op">=</span> <span class="fu">fct_collapse</span><span class="op">(</span><span class="va">partyid</span>,
    other <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"No answer"</span>, <span class="st">"Don't know"</span>, <span class="st">"Other party"</span><span class="op">)</span>,
    rep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Strong republican"</span>, <span class="st">"Not str republican"</span><span class="op">)</span>,
    ind <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ind,near rep"</span>, <span class="st">"Independent"</span>, <span class="st">"Ind,near dem"</span><span class="op">)</span>,
    dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Not str democrat"</span>, <span class="st">"Strong democrat"</span><span class="op">)</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">partyid</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   partyid     n</span>
<span class="co">#&gt; * &lt;fct&gt;   &lt;int&gt;</span>
<span class="co">#&gt; 1 other     548</span>
<span class="co">#&gt; 2 rep      5346</span>
<span class="co">#&gt; 3 ind      8409</span>
<span class="co">#&gt; 4 dem      7180</span></code></pre></div>
<p>Sometimes you just want to lump together all the small groups to make a plot or table simpler. That’s the job of <code>fct_lump()</code>:</p>
<div class="sourceCode" id="cb389"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>relig <span class="op">=</span> <span class="fu">fct_lump</span><span class="op">(</span><span class="va">relig</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">relig</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;   relig          n</span>
<span class="co">#&gt; * &lt;fct&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Protestant 10846</span>
<span class="co">#&gt; 2 Other      10637</span></code></pre></div>
<p>The default behaviour is to progressively lump together the smallest groups, ensuring that the aggregate is still the smallest group. In this case it’s not very helpful: it is true that the majority of Americans in this survey are Protestant, but we’ve probably over collapsed.</p>
<p>Instead, we can use the <code>n</code> parameter to specify how many groups (excluding other) we want to keep:</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gss_cat</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>relig <span class="op">=</span> <span class="fu">fct_lump</span><span class="op">(</span><span class="va">relig</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">relig</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 2</span>
<span class="co">#&gt;    relig                       n</span>
<span class="co">#&gt;    &lt;fct&gt;                   &lt;int&gt;</span>
<span class="co">#&gt;  1 Protestant              10846</span>
<span class="co">#&gt;  2 Catholic                 5124</span>
<span class="co">#&gt;  3 None                     3523</span>
<span class="co">#&gt;  4 Christian                 689</span>
<span class="co">#&gt;  5 Other                     458</span>
<span class="co">#&gt;  6 Jewish                    388</span>
<span class="co">#&gt;  7 Buddhism                  147</span>
<span class="co">#&gt;  8 Inter-nondenominational   109</span>
<span class="co">#&gt;  9 Moslem/islam              104</span>
<span class="co">#&gt; 10 Orthodox-christian         95</span></code></pre></div>
<div id="exercises-46" class="section level3" number="15.5.1">
<h3>
<span class="header-section-number">15.5.1</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-46"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>How have the proportions of people identifying as Democrat, Republican, and
Independent changed over time?</p></li>
<li><p>How could you collapse <code>rincome</code> into a small set of categories?</p></li>
<li><p>Notice there are 9 groups (excluding other) in the <code>fct_lump</code> example above. Why not 10? (Hint: type <code>?fct_lump</code>, and find the default for the argument <code>other_level</code> is “Other”.)</p></li>
</ol>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="strings.html"><span class="header-section-number">14</span> Strings</a></div>
<div class="next"><a href="dates-and-times.html"><span class="header-section-number">16</span> Dates and times</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#factors"><span class="header-section-number">15</span> Factors</a></li>
<li>
<a class="nav-link" href="#introduction-9"><span class="header-section-number">15.1</span> Introduction</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#prerequisites-9"><span class="header-section-number">15.1.1</span> Prerequisites</a></li>
<li><a class="nav-link" href="#learning-more-1"><span class="header-section-number">15.1.2</span> Learning more</a></li>
</ul>
</li>
<li><a class="nav-link" href="#creating-factors"><span class="header-section-number">15.2</span> Creating factors</a></li>
<li>
<a class="nav-link" href="#general-social-survey"><span class="header-section-number">15.3</span> General Social Survey</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise"><span class="header-section-number">15.3.1</span> Exercise</a></li></ul>
</li>
<li>
<a class="nav-link" href="#modifying-factor-order"><span class="header-section-number">15.4</span> Modifying factor order</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercises-45"><span class="header-section-number">15.4.1</span> Exercises</a></li></ul>
</li>
<li>
<a class="nav-link" href="#modifying-factor-levels"><span class="header-section-number">15.5</span> Modifying factor levels</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercises-46"><span class="header-section-number">15.5.1</span> Exercises</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r4ds/blob/master/factors.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r4ds/edit/master/factors.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R for Data Science (2e)</strong>" was written by Hadley Wickham and Garrett Grolemund. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
